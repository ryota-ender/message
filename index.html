<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>寄せ書き</title>
  <style>
    @import url("https://fonts.googleapis.com/css2?family=Klee+One:wght@400;600&family=Shippori+Mincho:wght@400;600&display=swap");

    :root {
      --wood-1: #6b4a2b;
      --wood-2: #4f351f;
      --board: #2f3a32;
      --chalk: #f5efe6;
      --accent: #d07a55;
      --muted: #e7dccb;
      --line: rgba(245,239,230,0.35);
    }

    * { box-sizing: border-box; }
    body {
      margin: 0;
      color: var(--chalk);
      background:
        linear-gradient(120deg, rgba(255,255,255,0.08), rgba(0,0,0,0.08)),
        repeating-linear-gradient(90deg, rgba(255,255,255,0.03) 0 6px, rgba(0,0,0,0.03) 6px 12px),
        linear-gradient(135deg, var(--wood-1), var(--wood-2));
      font-family: "Shippori Mincho", "Noto Serif JP", serif;
      min-height: 100vh;
    }

    header {
      text-align: center;
      padding: 28px 16px 8px;
    }
    header h1 {
      margin: 0;
      letter-spacing: 0.08em;
      font-size: 30px;
    }

    main {
      max-width: 860px;
      margin: 0 auto;
      padding: 16px 20px 40px;
    }

    .board {
      background:
        radial-gradient(1200px 800px at 10% 10%, rgba(255,255,255,0.05), transparent 60%),
        var(--board);
      border-radius: 18px;
      padding: 22px;
      box-shadow: 0 12px 30px rgba(0,0,0,0.35);
      border: 8px solid #7b5532;
      position: relative;
    }
    .board:before {
      content: "";
      position: absolute;
      inset: 6px;
      border: 1px solid rgba(255,255,255,0.08);
      border-radius: 12px;
      pointer-events: none;
    }

    .menu-title {
      font-family: "Klee One", "Noto Serif JP", serif;
      font-size: 18px;
      margin-bottom: 12px;
      letter-spacing: 0.06em;
    }

    .menu-list {
      display: flex;
      flex-direction: column;
      gap: 6px;
      margin-bottom: 6px;
    }

    .menu-item {
      width: 100%;
      text-align: left;
      font-family: "Klee One", "Noto Serif JP", serif;
      font-size: 17px;
      color: var(--chalk);
      background: transparent;
      border: none;
      padding: 8px 10px;
      border-bottom: 1px dashed var(--line);
      cursor: pointer;
      transition: transform 0.08s ease, color 0.08s ease;
    }
    .menu-item:hover {
      transform: translateX(4px);
      color: #fff7ee;
    }
    .menu-item.active {
      color: #ffe1c9;
    }

    .hint { font-size: 13px; color: var(--muted); }
    .hidden { display: none; }

    .field {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      align-items: center;
      margin: 10px 0;
    }
    label {
      width: 100%;
      font-size: 13px;
      color: var(--muted);
    }
    input, button {
      font-size: 16px;
      padding: 10px 12px;
      border-radius: 10px;
      font-family: "Klee One", "Noto Serif JP", serif;
    }
    input {
      border: 1px solid #d8cbbb;
      flex: 1;
      color: #2b2b2b;
    }
    button.action {
      background: var(--accent);
      color: white;
      border: none;
      cursor: pointer;
      padding: 10px 16px;
    }
    button.action:hover { opacity: 0.92; }

    .error { color: #ffb0b0; margin-top: 8px; }

    .modal {
      position: fixed;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
      z-index: 1000;
    }
    .modal.hidden { display: none; }
    .modal-backdrop {
      position: absolute;
      inset: 0;
      background: rgba(0,0,0,0.55);
      backdrop-filter: blur(2px);
    }
    .modal-card {
      position: relative;
      width: min(520px, 92vw);
      background:
        radial-gradient(900px 600px at 10% 10%, rgba(255,255,255,0.05), transparent 60%),
        var(--board);
      border-radius: 16px;
      padding: 18px 18px 16px;
      border: 6px solid #7b5532;
      box-shadow: 0 18px 40px rgba(0,0,0,0.45);
    }
    .modal-card:before {
      content: "";
      position: absolute;
      inset: 6px;
      border: 1px solid rgba(255,255,255,0.08);
      border-radius: 12px;
      pointer-events: none;
    }
    .modal-head {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 10px;
      font-family: "Klee One", "Noto Serif JP", serif;
    }
    .modal-title {
      font-size: 18px;
      letter-spacing: 0.06em;
    }
    .modal-close {
      background: transparent;
      border: none;
      color: var(--chalk);
      font-size: 22px;
      cursor: pointer;
      padding: 4px 8px;
    }
    .modal-name {
      font-family: "Klee One", "Noto Serif JP", serif;
      font-size: 18px;
      margin-bottom: 8px;
    }
    .modal-actions {
      display: flex;
      justify-content: flex-end;
      margin-top: 10px;
    }

    .messages {
      margin-top: 14px;
      display: grid;
      gap: 12px;
    }
    .msg {
      background: rgba(255,255,255,0.04);
      border: 1px dashed rgba(255,255,255,0.2);
      border-radius: 12px;
      padding: 14px 16px;
    }
    .msg .from {
      font-weight: bold;
      color: #ffe1c9;
      margin-bottom: 6px;
      font-family: "Klee One", "Noto Serif JP", serif;
    }
  </style>
</head>
<body>
  <header>
    <h1>卒業寄せ書き</h1>
  </header>

  <main>
    <section class="board" id="loginPanel">
      <div class="menu-title">名前を選んでください</div>
      <div class="menu-list" id="menuList"></div>
    </section>

    <section class="board hidden" id="messagesPanel" style="margin-top:18px;">
      <div class="field" style="justify-content: space-between;">
        <div id="welcome"></div>
        <button class="action" id="logoutBtn">閉じる</button>
      </div>
      <div class="messages" id="messagesList"></div>
    </section>
  </main>

  <div class="modal hidden" id="passwordModal" aria-hidden="true">
    <div class="modal-backdrop" id="modalBackdrop"></div>
    <div class="modal-card" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
      <div class="modal-head">
        <div class="modal-title" id="modalTitle">パスワード入力</div>
        <button class="modal-close" id="modalClose" aria-label="閉じる">×</button>
      </div>
      <div class="modal-body">
        <div class="modal-name" id="modalName"></div>
        <div class="field">
          <label for="modalPassword">パスワード</label>
          <input id="modalPassword" type="password" placeholder="0000" />
        </div>
        <div class="hint">※ ここでは全員パスワードは 0000 です</div>
        <div class="error hidden" id="modalError">名前またはパスワードが違います。</div>
      </div>
      <div class="modal-actions">
        <button class="action" id="modalLoginBtn">ログイン</button>
      </div>
    </div>
  </div>

  <script>
    const GUEST_PASSWORDS = {
      "ヒロイシ カイト": "0000",
      "タナカ ルイト": "0000",
      "ミヤシタ ケント": "0000",
      "カトウ タクミ": "0000",
      "エンドウ モモカ": "0000",
      "サトウ トモカ": "0000",
      "タベ ユキノ": "0000",
      "クマクラ キエ": "0000",
      "カバサワ ミホ": "0000",
      "スガタ マチ": "0000",
      "グンジ ハヤト": "0000"
    };

    const MESSAGES_DATA = [
      ["ヒロイシ カイト", "店長", "卒業おめでとう！ムードメーカーとして店を盛り上げてくれてありがとう。"],
      ["ヒロイシ カイト", "スタッフA", "ヒロイシさんのおかげで楽しかったです！お元気で！高橋！！！"],
      ["ヒロイシ カイト", "スタッフB", "ヒロイシさんのおかげで楽しかったです！お元気で！"],
      ["ヒロイシ カイト", "スタッフC", "ヒロイシさんのおかげで楽しかったです！お元気で！"],
      ["ヒロイシ カイト", "スタッフD", "ヒロイシさんのおかげで楽しかったです！お元気で！"],
      ["ヒロイシ カイト", "スタッフE", "ヒロイシさんのおかげで楽しかったです！お元気で！"],
      ["ヒロイシ カイト", "スタッフF", "ヒロイシさんのおかげで楽しかったです！お元気で！"],
      ["ヒロイシ カイト", "スタッフG", "ヒロイシさんのおかげで楽しかったです！お元気で！"],
      ["ヒロイシ カイト", "スタッフH", "ヒロイシさんのおかげで楽しかったです！お元気で！"],
      ["ヒロイシ カイト", "スタッフI", "ヒロイシさんのおかげで楽しかったです！お元気で！"],
      ["タナカ ルイト", "キッチン担当", "忙しい時の手際の良さ、尊敬してました。卒業おめでとうございます。"],
      ["タナカ ルイト", "後輩A", "色々教えてくれてありがとうございました！"],
      ["ミヤシタ ケント", "ホール長", "丁寧な接客、いつも頼りにしてました。就職しても頑張ってね！"],
      ["カトウ タクミ", "店長", "シフトにたくさん入ってくれて本当に助かりました。ありがとう！"],
      ["エンドウ モモカ", "同期メンバー", "モモカちゃん卒業さみしい！またご飯行こうね。"],
      ["エンドウ モモカ", "後輩B", "いつも優しくフォローしてくれて嬉しかったです。"],
      ["サトウ トモカ", "店長", "いつも笑顔で接客してくれて、お客様からの評判も最高でした。ありがとう！"],
      ["タベ ユキノ", "スタッフC", "ユキノさん、卒業おめでとうございます！ラストシフトお疲れ様でした。"],
      ["クマクラ キエ", "同期一同", "キエちゃんお疲れ様！社会人になっても応援してるよー！"],
      ["カバサワ ミホ", "店長", "真面目に仕事に取り組む姿勢、素晴らしかったです。次のステージでも頑張って！"],
      ["スガタ マチ", "後輩D", "マチさんの教え方すごく分かりやすかったです。ありがとうございました！"],
      ["グンジ ハヤト", "キッチン一同", "ハヤト、お疲れ！また店に顔出しに来いよー！"],
      ["グンジ ハヤト", "店長", "ラストまでありがとう。元気でな！"]
    ];

    const menuList = document.getElementById("menuList");
    const modal = document.getElementById("passwordModal");
    const modalBackdrop = document.getElementById("modalBackdrop");
    const modalClose = document.getElementById("modalClose");
    const modalName = document.getElementById("modalName");
    const modalPassword = document.getElementById("modalPassword");
    const modalLoginBtn = document.getElementById("modalLoginBtn");
    const modalError = document.getElementById("modalError");

    const loginPanel = document.getElementById("loginPanel");
    const messagesPanel = document.getElementById("messagesPanel");
    const messagesList = document.getElementById("messagesList");
    const welcome = document.getElementById("welcome");
    const logoutBtn = document.getElementById("logoutBtn");

    let selectedName = null;

    function openModal(name) {
      selectedName = name;
      modalName.textContent = name;
      modalPassword.value = "";
      modalError.classList.add("hidden");
      modal.classList.remove("hidden");
      modal.setAttribute("aria-hidden", "false");
      modalPassword.focus();
    }

    function closeModal() {
      modal.classList.add("hidden");
      modal.setAttribute("aria-hidden", "true");
    }

    function renderMenu() {
      menuList.innerHTML = "";
      Object.keys(GUEST_PASSWORDS).forEach(name => {
        const btn = document.createElement("button");
        btn.className = "menu-item";
        btn.type = "button";
        btn.textContent = name;
        btn.addEventListener("click", () => {
          [...menuList.children].forEach(el => el.classList.remove("active"));
          btn.classList.add("active");
          openModal(name);
        });
        menuList.appendChild(btn);
      });
    }

    function showMessagesFor(name) {
      messagesList.innerHTML = "";
      const items = MESSAGES_DATA.filter(m => m[0] === name);
      if (!items.length) {
        messagesList.innerHTML = "<div class='hint'>メッセージはまだありません。</div>";
        return;
      }
      items.forEach(([to, from, message]) => {
        const card = document.createElement("div");
        card.className = "msg";
        card.innerHTML = `<div class="from">${from} さんより</div><div>${message}</div>`;
        messagesList.appendChild(card);
      });
    }

    function attemptLogin() {
      const pass = modalPassword.value.trim();
      const expected = selectedName ? GUEST_PASSWORDS[selectedName] : null;

      if (selectedName && pass === expected) {
        modalError.classList.add("hidden");
        closeModal();
        loginPanel.classList.add("hidden");
        messagesPanel.classList.remove("hidden");
        welcome.textContent = `${selectedName} さんへのメッセージ`;
        showMessagesFor(selectedName);
        window.scrollTo({ top: 0, behavior: "smooth" });
      } else {
        modalError.classList.remove("hidden");
      }
    }

    modalLoginBtn.addEventListener("click", attemptLogin);
    modalPassword.addEventListener("keydown", (event) => {
      if (event.key === "Enter") {
        event.preventDefault();
        attemptLogin();
      }
    });
    modalBackdrop.addEventListener("click", closeModal);
    modalClose.addEventListener("click", closeModal);
    document.addEventListener("keydown", (event) => {
      if (event.key === "Escape" && !modal.classList.contains("hidden")) {
        closeModal();
      }
    });

    logoutBtn.addEventListener("click", () => {
      messagesPanel.classList.add("hidden");
      loginPanel.classList.remove("hidden");
      [...menuList.children].forEach(el => el.classList.remove("active"));
      selectedName = null;
    });

    renderMenu();
  </script>
</body>
</html>
