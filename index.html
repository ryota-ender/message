<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>寄せ書き</title>
  <style>
    @import url("https://fonts.googleapis.com/css2?family=Klee+One:wght@400;600&family=Shippori+Mincho:wght@400;600&display=swap");

    :root {
      --wood-1: #6a4a2f;
      --wood-2: #3f2a1a;
      --paper: #fff7ec;
      --paper-shadow: #f0e1cf;
      --ink: #3b2b21;
      --accent: #c86b43;
      --line: #d9c7b1;
      --muted: #7a6454;
    }

    * { box-sizing: border-box; }
    body {
      margin: 0;
      color: var(--ink);
      background:
        linear-gradient(120deg, rgba(255,255,255,0.08), rgba(0,0,0,0.08)),
        repeating-linear-gradient(90deg, rgba(255,255,255,0.03) 0 6px, rgba(0,0,0,0.03) 6px 12px),
        linear-gradient(135deg, var(--wood-1), var(--wood-2));
      font-family: "Shippori Mincho", "Noto Serif JP", serif;
      min-height: 100vh;
    }
    body.modal-open { overflow: hidden; }

    header {
      text-align: center;
      padding: 26px 16px 8px;
    }
    header h1 {
      margin: 0;
      letter-spacing: 0.08em;
      font-size: 28px;
      color: #f8efe6;
      text-shadow: 0 2px 10px rgba(0,0,0,0.35);
    }

    main {
      max-width: 560px;
      margin: 0 auto;
      padding: 10px 16px 32px;
    }

    .board {
      background: linear-gradient(180deg, var(--paper) 0%, var(--paper-shadow) 100%);
      border-radius: 18px;
      padding: 18px;
      box-shadow: 0 12px 30px rgba(0,0,0,0.25);
      border: 2px solid #d1b899;
      position: relative;
    }
    .board:before {
      content: "";
      position: absolute;
      inset: 8px;
      border: 1px solid rgba(0,0,0,0.08);
      border-radius: 12px;
      pointer-events: none;
    }

    .menu-title {
      font-family: "Klee One", "Noto Serif JP", serif;
      font-size: 17px;
      margin-bottom: 10px;
      letter-spacing: 0.06em;
      text-align: center;
    }

    .menu-list {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 6px;
      margin-bottom: 8px;
    }

    .menu-item {
      width: min(360px, 86vw);
      text-align: center;
      font-family: "Klee One", "Noto Serif JP", serif;
      font-size: 18px;
      color: var(--ink);
      background: transparent;
      border: none;
      padding: 10px 12px;
      cursor: pointer;
      position: relative;
    }
    .menu-item:after {
      content: \"\";
      position: absolute;
      left: 14px;
      right: 14px;
      bottom: 4px;
      height: 1px;
      background: linear-gradient(90deg, transparent, rgba(59,43,33,0.35), transparent);
    }
    .menu-item:hover { color: #2a1f18; }
    .menu-item:active { transform: scale(0.98); }
    .menu-item:focus-visible { outline: 3px solid rgba(200,107,67,0.35); border-radius: 10px; }

    .dish-item {
      width: clamp(220px, 72vw, 320px);
      aspect-ratio: 1 / 1;
      position: relative;
      background: transparent;
      border: none;
      padding: 0;
      cursor: pointer;
      transition: transform 0.08s ease, filter 0.08s ease;
    }
    .dish-item img {
      width: 100%;
      height: 100%;
      display: block;
    }
    .dish-item:hover { transform: translateY(-2px); }
    .dish-item:active { transform: scale(0.98); }
    .dish-item:focus-visible { outline: 3px solid rgba(200,107,67,0.5); border-radius: 50%; }

    .dish-name {
      position: absolute;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      padding: 20px;
      font-family: "Klee One", "Noto Serif JP", serif;
      font-size: clamp(16px, 4.6vw, 22px);
      color: var(--ink);
      text-shadow: 0 1px 6px rgba(255,255,255,0.8);
      pointer-events: none;
    }

    .dish-item--small {
      width: 100%;
      max-width: 240px;
      justify-self: center;
    }

    .hint { font-size: 12px; color: var(--muted); text-align: center; }
    .hidden { display: none; }

    .panel-head {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
      margin-bottom: 6px;
      flex-wrap: wrap;
    }
    #welcome {
      font-size: 16px;
      font-family: "Klee One", "Noto Serif JP", serif;
    }

    .field {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      align-items: center;
      margin: 10px 0;
    }
    label {
      width: 100%;
      font-size: 13px;
      color: var(--muted);
    }
    input, button {
      font-size: 16px;
      padding: 10px 12px;
      border-radius: 10px;
      font-family: "Klee One", "Noto Serif JP", serif;
    }
    input {
      border: 1px solid #d8cbbb;
      flex: 1;
      color: #2b2b2b;
      background: #fff;
    }
    button.action {
      background: var(--accent);
      color: white;
      border: none;
      cursor: pointer;
      padding: 10px 16px;
      box-shadow: 0 6px 12px rgba(200,107,67,0.2);
    }
    button.action:hover { opacity: 0.92; }

    .error { color: #b2362e; margin-top: 8px; font-size: 13px; }

    .sender-list {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 12px;
      margin-top: 12px;
    }

    .modal {
      position: fixed;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
      z-index: 1000;
    }
    .modal.hidden { display: none; }
    .modal-backdrop {
      position: absolute;
      inset: 0;
      background: rgba(0,0,0,0.5);
      backdrop-filter: blur(2px);
    }
    .modal-card {
      position: relative;
      width: min(520px, 92vw);
      background: linear-gradient(180deg, var(--paper) 0%, var(--paper-shadow) 100%);
      border-radius: 16px;
      padding: 16px;
      border: 2px solid #d1b899;
      box-shadow: 0 18px 40px rgba(0,0,0,0.35);
      color: var(--ink);
    }
    .modal-card:before {
      content: "";
      position: absolute;
      inset: 8px;
      border: 1px solid rgba(0,0,0,0.08);
      border-radius: 12px;
      pointer-events: none;
    }
    .modal-head {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 8px;
      font-family: "Klee One", "Noto Serif JP", serif;
    }
    .modal-title {
      font-size: 17px;
      letter-spacing: 0.06em;
    }
    .modal-close {
      background: transparent;
      border: none;
      color: var(--ink);
      font-size: 22px;
      cursor: pointer;
      padding: 4px 8px;
    }
    .modal-name {
      font-family: "Klee One", "Noto Serif JP", serif;
      font-size: 18px;
      margin-bottom: 8px;
    }
    .modal-actions {
      display: flex;
      justify-content: flex-end;
      margin-top: 10px;
    }

    .message-text {
      background: #fff;
      border: 1px dashed var(--line);
      border-radius: 12px;
      padding: 12px;
      font-size: 15px;
      line-height: 1.6;
      white-space: pre-wrap;
    }
  </style>
</head>
<body>
  <header>
    <h1>Congratulations Message</h1>
  </header>

  <main>
    <section class="board" id="loginPanel">
      <div class="menu-title">Thank you for everything!</div>
      <div class="menu-list" id="menuList"></div>
    </section>

    <section class="board hidden" id="messagesPanel" style="margin-top:18px;">
      <div class="panel-head">
        <div id="welcome"></div>
        <button class="action" id="logoutBtn">名前一覧へ戻る</button>
      </div>
      <div class="menu-title">メッセージを送ってくれた人</div>
      <div class="sender-list" id="messagesList"></div>
    </section>
  </main>

  <div class="modal hidden" id="passwordModal" aria-hidden="true">
    <div class="modal-backdrop" id="modalBackdrop"></div>
    <div class="modal-card" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
      <div class="modal-head">
        <div class="modal-title" id="modalTitle">名前</div>
        <button class="modal-close" id="modalClose" aria-label="閉じる">×</button>
      </div>
      <div class="modal-body">
        <div class="modal-name" id="modalName"></div>
        <div class="field">
          <label for="modalPassword">パスワード</label>
          <input id="modalPassword" type="password" placeholder="0000" />
        </div>
        <div class="error hidden" id="modalError">名前またはパスワードが違います。</div>
      </div>
      <div class="modal-actions">
        <button class="action" id="modalLoginBtn">ログイン</button>
      </div>
    </div>
  </div>

  <div class="modal hidden" id="messageModal" aria-hidden="true">
    <div class="modal-backdrop" id="messageBackdrop"></div>
    <div class="modal-card" role="dialog" aria-modal="true" aria-labelledby="messageTitle">
      <div class="modal-head">
        <div class="modal-title" id="messageTitle">メッセージ</div>
        <button class="modal-close" id="messageClose" aria-label="閉じる">×</button>
      </div>
      <div class="modal-body">
        <div class="modal-name" id="messageFrom"></div>
        <div class="message-text" id="messageBody"></div>
      </div>
      <div class="modal-actions">
        <button class="action" id="messageOk">閉じる</button>
      </div>
    </div>
  </div>

  <script>
    const GUEST_PASSWORDS = {
      "ヒロイシ カイト": "0000",
      "タナカ ルイト": "0000",
      "ミヤシタ ケント": "0000",
      "カトウ タクミ": "0000",
      "エンドウ モモカ": "0000",
      "サトウ トモカ": "0000",
      "タベ ユキノ": "0000",
      "クマクラ キエ": "0000",
      "カバサワ ミホ": "0000",
      "スガタ マチ": "0000",
      "グンジ ハヤト": "0000"
    };

    const MESSAGES_DATA = [
      ["ヒロイシ カイト", "店長", "卒業おめでとう！ムードメーカーとして店を盛り上げてくれてありがとう。"],
      ["ヒロイシ カイト", "スタッフA", "ヒロイシさんのおかげで楽しかったです！お元気で！高橋！！！"],
      ["ヒロイシ カイト", "スタッフB", "ヒロイシさんのおかげで楽しかったです！お元気で！"],
      ["ヒロイシ カイト", "スタッフC", "ヒロイシさんのおかげで楽しかったです！お元気で！"],
      ["ヒロイシ カイト", "スタッフD", "ヒロイシさんのおかげで楽しかったです！お元気で！"],
      ["ヒロイシ カイト", "スタッフE", "ヒロイシさんのおかげで楽しかったです！お元気で！"],
      ["ヒロイシ カイト", "スタッフF", "ヒロイシさんのおかげで楽しかったです！お元気で！"],
      ["ヒロイシ カイト", "スタッフG", "ヒロイシさんのおかげで楽しかったです！お元気で！"],
      ["ヒロイシ カイト", "スタッフH", "ヒロイシさんのおかげで楽しかったです！お元気で！"],
      ["ヒロイシ カイト", "スタッフI", "ヒロイシさんのおかげで楽しかったです！お元気で！"],
      ["タナカ ルイト", "キッチン担当", "忙しい時の手際の良さ、尊敬してました。卒業おめでとうございます。"],
      ["タナカ ルイト", "後輩A", "色々教えてくれてありがとうございました！"],
      ["ミヤシタ ケント", "ホール長", "丁寧な接客、いつも頼りにしてました。就職しても頑張ってね！"],
      ["カトウ タクミ", "店長", "シフトにたくさん入ってくれて本当に助かりました。ありがとう！"],
      ["エンドウ モモカ", "同期メンバー", "モモカちゃん卒業さみしい！またご飯行こうね。"],
      ["エンドウ モモカ", "後輩B", "いつも優しくフォローしてくれて嬉しかったです。"],
      ["サトウ トモカ", "店長", "いつも笑顔で接客してくれて、お客様からの評判も最高でした。ありがとう！"],
      ["タベ ユキノ", "スタッフC", "ユキノさん、卒業おめでとうございます！ラストシフトお疲れ様でした。"],
      ["クマクラ キエ", "同期一同", "キエちゃんお疲れ様！社会人になっても応援してるよー！"],
      ["カバサワ ミホ", "店長", "真面目に仕事に取り組む姿勢、素晴らしかったです。次のステージでも頑張って！"],
      ["スガタ マチ", "後輩D", "マチさんの教え方すごく分かりやすかったです。ありがとうございました！"],
      ["グンジ ハヤト", "キッチン一同", "ハヤト、お疲れ！また店に顔出しに来いよー！"],
      ["グンジ ハヤト", "店長", "ラストまでありがとう。元気でな！"]
    ];

    const menuList = document.getElementById("menuList");
    const loginPanel = document.getElementById("loginPanel");
    const messagesPanel = document.getElementById("messagesPanel");
    const messagesList = document.getElementById("messagesList");
    const welcome = document.getElementById("welcome");
    const logoutBtn = document.getElementById("logoutBtn");

    const modal = document.getElementById("passwordModal");
    const modalBackdrop = document.getElementById("modalBackdrop");
    const modalClose = document.getElementById("modalClose");
    const modalName = document.getElementById("modalName");
    const modalPassword = document.getElementById("modalPassword");
    const modalLoginBtn = document.getElementById("modalLoginBtn");
    const modalError = document.getElementById("modalError");

    const messageModal = document.getElementById("messageModal");
    const messageBackdrop = document.getElementById("messageBackdrop");
    const messageClose = document.getElementById("messageClose");
    const messageOk = document.getElementById("messageOk");
    const messageFrom = document.getElementById("messageFrom");
    const messageBody = document.getElementById("messageBody");

    let selectedName = null;

    function setBodyModal(open) {
      if (open) {
        document.body.classList.add("modal-open");
      } else {
        document.body.classList.remove("modal-open");
      }
    }

    function openPasswordModal(name) {
      selectedName = name;
      modalName.textContent = name;
      modalPassword.value = "";
      modalError.classList.add("hidden");
      modal.classList.remove("hidden");
      modal.setAttribute("aria-hidden", "false");
      setBodyModal(true);
      modalPassword.focus();
    }

    function closePasswordModal() {
      modal.classList.add("hidden");
      modal.setAttribute("aria-hidden", "true");
      setBodyModal(false);
    }

    function openMessageModal(from, message) {
      messageFrom.textContent = `${from} さんより`;
      messageBody.textContent = message;
      messageModal.classList.remove("hidden");
      messageModal.setAttribute("aria-hidden", "false");
      setBodyModal(true);
    }

    function closeMessageModal() {
      messageModal.classList.add("hidden");
      messageModal.setAttribute("aria-hidden", "true");
      setBodyModal(false);
    }

    function createDishButton(name, onClick, small) {
      const btn = document.createElement("button");
      btn.className = small ? "dish-item dish-item--small" : "dish-item";
      btn.type = "button";
      btn.setAttribute("aria-label", name);
      btn.innerHTML = `
        <img src="images/dish.png" alt="" aria-hidden="true" />
        <span class="dish-name">${name}</span>
      `;
      btn.addEventListener("click", onClick);
      return btn;
    }

    function createMenuButton(name, onClick) {
      const btn = document.createElement("button");
      btn.className = "menu-item";
      btn.type = "button";
      btn.textContent = name;
      btn.setAttribute("aria-label", name);
      btn.addEventListener("click", onClick);
      return btn;
    }

    function renderMenu() {
      menuList.innerHTML = "";
      Object.keys(GUEST_PASSWORDS).forEach(name => {
        const btn = createMenuButton(name, () => openPasswordModal(name));
        menuList.appendChild(btn);
      });
    }

    function showMessagesFor(name) {
      messagesList.innerHTML = "";
      const items = MESSAGES_DATA.filter(m => m[0] === name);
      if (!items.length) {
        messagesList.innerHTML = "<div class='hint'>メッセージはまだありません。</div>";
        return;
      }
      items.forEach(([to, from, message]) => {
        const btn = createDishButton(from, () => openMessageModal(from, message), true);
        messagesList.appendChild(btn);
      });
    }

    function attemptLogin() {
      const pass = modalPassword.value.trim();
      const expected = selectedName ? GUEST_PASSWORDS[selectedName] : null;

      if (selectedName && pass === expected) {
        modalError.classList.add("hidden");
        closePasswordModal();
        loginPanel.classList.add("hidden");
        messagesPanel.classList.remove("hidden");
        welcome.textContent = `${selectedName} さんへのメッセージ`;
        showMessagesFor(selectedName);
        window.scrollTo({ top: 0, behavior: "smooth" });
      } else {
        modalError.classList.remove("hidden");
      }
    }

    modalLoginBtn.addEventListener("click", attemptLogin);
    modalPassword.addEventListener("keydown", (event) => {
      if (event.key === "Enter") {
        event.preventDefault();
        attemptLogin();
      }
    });
    modalBackdrop.addEventListener("click", closePasswordModal);
    modalClose.addEventListener("click", closePasswordModal);

    messageBackdrop.addEventListener("click", closeMessageModal);
    messageClose.addEventListener("click", closeMessageModal);
    messageOk.addEventListener("click", closeMessageModal);

    document.addEventListener("keydown", (event) => {
      if (event.key === "Escape") {
        if (!modal.classList.contains("hidden")) {
          closePasswordModal();
        } else if (!messageModal.classList.contains("hidden")) {
          closeMessageModal();
        }
      }
    });

    logoutBtn.addEventListener("click", () => {
      messagesPanel.classList.add("hidden");
      loginPanel.classList.remove("hidden");
      selectedName = null;
    });

    renderMenu();
  </script>
</body>
</html>
